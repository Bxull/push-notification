<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Добро пожаловать!</title>
    <link rel="stylesheet" href="profile.css" type="text/css" media="all" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const tg = window.Telegram.WebApp;
            tg.expand(); // Расширяем веб-приложение на весь экран

            const user = tg.initDataUnsafe.user;
            if (user) {
                document.querySelector('.header-title').innerHTML = user.first_name + ' ' + (user.last_name || '');
            }

            document.getElementById('notify-btn').addEventListener('click', () => {
                fetch('/send-notification', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ chat_id: tg.initDataUnsafe.user.id, message: 'Ваше уведомление' })
                }).then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Уведомление отправлено!');
                    } else {
                        alert('Ошибка отправки уведомления');
                    }
                }).catch(error => {
                    console.error('Ошибка:', error);
                    alert('Ошибка отправки уведомления');
                });
            });
        });
    </script>
</head>
<body>
    <header>
        <h3 class="header-title"></h3>
    </header>
    <main>
        <button id="notify-btn">Отправить уведомление</button>
    </main>
</body>
</html>
